!function(a){"use strict";var b={lowerString:function(a){return a.toLowerCase()}},c=function(a,b){return a?a(b):b},d=function(a,b){return function(d,e){return c(b,d[a].apply(d,e?[].concat(e):[]))}},e=function(a,b){return function(d){return c(b,d.prop(a))}},f=function(a,b){var c=b||{},f=null;f=c.prop?e(a,c.sanitize):d(a,c.sanitize),this.testPropFn=f};f.prototype.allowText=function(){var a=this.testPropFn;return this.testString=function(b,c){return a(b)===c},this},f.prototype.allowNumber=function(){var a=this.testPropFn;return this.testNumber=function(b,c){return parseInt(a(b))===c},this},f.prototype.allowCount=function(){var a=this.testPropFn;return this.testNumber=function(b,c){return a(b).length===c},this},f.prototype.allowFunction=function(){var a=this.testPropFn;return this.testFunction=function(b,c){return c(a(b))},this},f.prototype.allowRegex=function(){var a=this.testPropFn;return this.testRegexp=function(b,c){return a(b).match(c)},this},f.prototype.allowKeyValue=function(){var a=this.testPropFn;return this.testKeyValue=function(b,c){return a(b,c.key)==c.value},this},f.prototype.allowKeyValueFunction=function(){var a=this.testPropFn;return this.testKeyValueFn=function(b,c){return c.value(a(b,c.key))},this},f.prototype.allowKeyValueRegex=function(){var a=this.testPropFn;return this.testKeyRegexp=function(b,c){return(""+a(b,c.key)).match(c.value)},this},f.prototype.allowKeyValueDef=function(){var a=this.testPropFn;return this.testKeyBoolean=function(b,c){return void 0!==a(b,c.key)===c.exists},this};var g={html:new f("html").allowFunction().allowText().allowRegex(),text:new f("text").allowFunction().allowText().allowRegex(),width:new f("width").allowNumber().allowFunction(),height:new f("height").allowNumber().allowFunction(),outerHeight:new f("outerHeight").allowNumber().allowFunction(),innerHeight:new f("innerHeight").allowNumber().allowFunction(),outerWidth:new f("outerWidth").allowNumber().allowFunction(),innerWidth:new f("innerWidth").allowNumber().allowFunction(),css:new f("css").allowKeyValue().allowKeyValueFunction().allowKeyValueRegex(),data:new f("data").allowKeyValue().allowKeyValueFunction().allowKeyValueRegex().allowKeyValueDef(),attr:new f("attr").allowKeyValue().allowKeyValueFunction().allowKeyValueRegex().allowKeyValueDef(),children:new f("children").allowFunction().allowCount(),siblings:new f("siblings").allowFunction().allowCount(),parents:new f("parents").allowFunction().allowCount(),tagName:new f("tagName",{prop:!0,sanitize:b.lowerString}).allowFunction().allowText().allowRegex()},h=function(a,b){if(!a||!g[a])return null;if(b===""+b&&b.indexOf)return g[a].testString;if(b+0===b)return g[a].testNumber;if(b.compile)return g[a].testRegexp;if(b.prototype&&b.prototype.constructor)return g[a].testFunction;if(b.key){if(b.value)return b.value.prototype&&b.value.prototype.constructor?g[a].testKeyValueFn:b.value.compile?g[a].testKeyRegexp:g[a].testKeyValue;if(b.exists===!1||b.exists===!0)return g[a].testKeyBoolean}return null};a.fn.where=function(b){var c=this.toArray(),d=b;return d&&"object"==typeof d&&"number"==typeof d.length&&"[object Array]"==toString.call(d)||(d=[d]),a.each(d,function(b,d){for(var e=0;e<c.length;e++){var f=c[e],g=Object.keys(d)[0],i=d[g],j=h(g,i),k=a(f);if(!j)throw new Error("Assertion for filter "+g+" is unknown");j(k,i)||(c.splice(c.indexOf(f),1),e-=1)}}),a(c)}}(jQuery);